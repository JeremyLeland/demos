<title>Multiple SVGs for UI</title>
<link rel="stylesheet" href="../grid.css">

<style>
  #wrapper {
    display: grid;
    /* TODO: Should this resize if bigger/smaller screen? */
    grid-template-columns: auto 140px;
    max-width: 100vw;
    max-height: 100vh;
  }
  #board {
    overflow: auto;
    max-height: 100vh;
  }
  #ui {
    overflow: auto;
    max-height: 100vh;
  }
  .line {
    fill: none;
    stroke-width: 0.1;
  }
  .red    { stroke: red;    }
  .yellow { stroke: yellow; }
  .green  { stroke: green;  }
  .blue   { stroke: blue;   }
</style>

<body>
  <div id="wrapper">
    <div id="board">
      <!-- preserveAspectRatio? xMidYMin? something else? -->
      <svg width="100%" height="100%" viewBox="-5 -5 10 10" preserveAspectRatio="xMidYMin">
        
        <g id="testPiece">
        </g>
        
        <circle cx="2" cy="2" r="1" stroke="green" fill="orange" stroke-width="0.1"/>
      </svg>
    </div>
    <div id="ui">
      <svg width="100%" viewBox="-1 -1 2 112">
        <circle cx="0" cy="0" r="1" stroke="green" fill="red" stroke-width="0.1"/>
        <circle cx="0" cy="2" r="1" stroke="green" fill="yellow" stroke-width="0.1"/>
        <circle cx="0" cy="110" r="1" stroke="green" fill="yellow" stroke-width="0.1"/>
      </svg>
    </div>
  </div>
</body>

<script type="module">
  import * as Tantrix from './Tantrix.js';

  const SVG_NS = 'http://www.w3.org/2000/svg';

  const piece = document.getElementById( 'testPiece' );
  
  const hexagon = document.createElementNS( SVG_NS, 'path' );
  hexagon.setAttribute( 'd', getHexPath() );
  piece.appendChild( hexagon );

  const tileIndex = 0;
  const colorSequence = Tantrix.ColorSequences[ tileIndex ];

  let start = 0, end = 0;
  for ( let i = 0; i < 3; i ++ ) {
    for ( end = start + 1; end < 6; end ++ ) {
      if ( colorSequence[ start ] == colorSequence[ end ] ) {
        break;
      }
    }

    const line = document.createElementNS( SVG_NS, 'path' );
    line.setAttribute( 'd', getLinePath( start, end ) );
    line.classList.add( 'line', Tantrix.Colors[ colorSequence[ start ] ] );
    piece.appendChild( line );

    start ++;
    if ( start == end ) {
      start ++;
    }
  }

  function createPieceSVG() {

  }

  function getHexPath() {
    const angles = Array.from( Array( 6 ), ( _, i ) => i * Math.PI * 2 / 6 );

    return `M ${ 
      angles.map( ang => `${ Math.cos( ang ) },${ Math.sin( ang ) }` ).join( ' L ' ) 
    } Z`;
  }

  function getLinePath( start, end ) {
    const DIST = 0.85;
    const angle1 = ( start - 0.5 ) * Math.PI * 2 / 6;
    const startX = Math.cos( angle1 ) * DIST;
    const startY = Math.sin( angle1 ) * DIST;

    const angle2 = ( end - 0.5 ) * Math.PI * 2 / 6;
    const endX = Math.cos( angle2 ) * DIST;
    const endY = Math.sin( angle2 ) * DIST;

    return `M ${ startX },${ startY } Q 0,0 ${ endX },${ endY }`;
  }

</script>
