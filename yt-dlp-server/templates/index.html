<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>yt-dlp Web Downloader</title>
</head>
<body>
    <h1>Download a Video</h1>
    <form id="download-form">
        <input type="text" id="url" placeholder="Enter video URL" required>
        <button type="submit">Download</button>
    </form>

    <pre id="progress"></pre>

    <script>
        document.getElementById('download-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const url = document.getElementById('url').value;

            fetch('/start_download', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url })
            });

            const progressElem = document.getElementById('progress');
            progressElem.textContent = '';

            const evtSource = new EventSource('/progress');
            evtSource.onmessage = function(event) {
                progressElem.textContent += event.data + '\n';
            };
        });
    </script>
</body>
</html>
