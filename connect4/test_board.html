<title>Draw board and pieces</title>
<link rel="stylesheet" href="../grid.css">

<script type="module">
  import { Canvas } from './Canvas.js';
  import { Connect4 } from './Connect4.js';

  const SIZE = 7;
  let scrollX = 0.5, scrollY = 1.5;

  const canvas = new Canvas();

  const game = Connect4.newGame();

  game.applyMove( [ -1, 5 ] );
  game.applyMove( [ 7, 5 ] );

  game.applyMove( [ 0, -1 ] );
  game.applyMove( [ 0, 6 ] );

  game.applyMove( [ 3, 5 ] );
  game.applyMove( [ 3, 4 ] );
  game.applyMove( [ 3, 3 ] );
  game.applyMove( [ 3, 2 ] );
  game.applyMove( [ 3, 1 ] );
  game.applyMove( [ 3, 0 ] );
  game.applyMove( [ 3, 0 ] );

  console.log( JSON.stringify( game ) );
  console.log( game.getPossibleMoves() );

  game.undo();

  console.log( JSON.stringify( game ) );
  console.log( game.getPossibleMoves() );

  game.applyMove( [ 4, 5 ] );
  game.applyMove( [ 4, 4 ] );

  console.log( game.getLongestAt( 3, 5, 1 ) );

  game.applyMove( [ 2, 5 ] );
  game.applyMove( [ 2, 4 ] );
  game.applyMove( [ 2, 3 ] );

  console.log( game.getLongestAt( 4, 5, 1 ) );
  console.log( game.getLongestAt( 4, 5, 2 ) );

  
  canvas.draw = ( ctx ) => {
    ctx.scale( 1 / SIZE, 1 / SIZE );
    ctx.translate( scrollX, scrollY );
    ctx.lineWidth = 1 / SIZE;

    game.draw( ctx );
  }

  canvas.redraw();

</script>
